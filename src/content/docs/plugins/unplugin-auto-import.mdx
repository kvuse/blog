---
title: è‡ªåŠ¨å¼•å…¥æ’ä»¶
---
:::tip
`unplugin-auto-import/vite`ä¸€æ¬¾è¶…çº§å¥½ç”¨è‡ªåŠ¨å¼•å…¥æ’ä»¶
:::

æˆ‘ä»¬å…ˆçœ‹ä¸‹æ•ˆæœï¼š

```js
// count.vue
<script setup>
const route = useRoute();
const count = ref(0)
const doubled = computed(() => count.value * 2)

watch(doubled, (val) => {
  console.log('New value: ' + val)
})
</script>

```

ä¸ç”¨å¼•å…¥å°±å¯ä»¥ä½¿ç”¨vueçš„APIï¼Œå¦‚æœä½ æ•¢å…´è¶£ï¼Œä¹Ÿæƒ³è¿™æ ·ç”¨ï¼Œå°±è·Ÿç€æˆ‘ä¸€èµ·å®ç°å§ã€‚

## é¡¹ç›®èƒŒæ™¯

æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µæˆ‘ä»¬ç»å¸¸å†™çš„ä¸€æ®µä»£ç 

```js
// count.vue
<script setup>
import { ref, computed, watch } from 'vue'

const count = ref(0)

const doubled = computed(() => count.value * 2)

watch(doubled, (val) => {
  console.log('New value: ' + val)
})
</script>

```

```js
// serach.vue
<script setup>
import { ref } from 'vue';

const search = ref('');
const seachHandle = (val) => {
  search.value = 'new value'
};
</script>
```

æœ‰æ²¡æœ‰å‘ç°æ¯ä¸€æ¬¡æˆ‘ä»¬ä½¿ç”¨`vue`çš„APIï¼Œæˆ‘ä»¬éƒ½ç”¨é¦–å…ˆå¼•å…¥ç›¸åº”çš„APIï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå…¬ç”¨çš„APIï¼Œè¿™æ ·å†™ï¼š

```js
// useCommon.js
import {
  ref, reactive, computed, watch, onMounted, nextTick, onUnmounted,
} from 'vue';
import { useRoute, useRouter } from 'vue-router';
import { storeToRefs } from 'pinia';

export function useCommon() {
  const route = useRoute();
  const router = useRouter();

  const routerName = computed(() => route.name);

  return {
    route, router, nextTick, ref, reactive, computed, watch, onMounted, onUnmounted, routerName, storeToRefs,
  };
}

```

ä½¿ç”¨çš„æ—¶å€™å¯ä»¥è¿™æ ·å¼•å…¥

```js
<script setup>
  import { useCommon } from '@common/core';
  const { store, route, router, ref, nextTick, routerName } = useCommon();
  const search = ref('')
</script>
```

è¿™æ ·æ˜¯ç®€å•äº†ä¸€ç‚¹ï¼Œä½†æ˜¯è¿˜æ˜¯è¦æ¯æ¬¡éƒ½å¼•å…¥ï¼Œå¾ˆä¸æ–¹ä¾¿ï¼Œæˆ‘ä¸€ç›´åœ¨è€ƒè™‘ï¼Œæœ‰æ²¡æœ‰ä¸€ç§å¯ä»¥ä¸ç”¨å¼•å…¥ï¼Œç›´æ¥ç”¨çš„æ–¹æ³•ã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬çœ‹ä¸‹æ€ä¹ˆç©å§ã€‚

## å®‰è£…

```js
npm i unplugin-auto-import -D
// or
yarn add unplugin-auto-import -D
```

## ä½¿ç”¨

`vite.config.js`æ–‡ä»¶ä¸­å¼•å…¥

```js
// vite.config.ts
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  plugins: [
    AutoImport({ /* options */ }),
  ],
})

```

## é…ç½®

### ä½¿ç”¨vue, vue-router

```js
// vite.config.ts
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  plugins: [
    AutoImport({
        imports: [
          'vue', 'vue-router',
        ],
      }),
  ],
})

```

ä½¿ç”¨å‰ï¼š

```js
// count.vue
<script setup>
import { ref, computed, watch } from 'vue'

const count = ref(0)

const doubled = computed(() => count.value * 2)

watch(doubled, (val) => {
  console.log('New value: ' + val)
})
</script>

```

ä½¿ç”¨çœ‹ä¸‹æ•ˆæœ

```js
// count.vue
<script setup>
const route = useRoute();
const count = ref(0)
const doubled = computed(() => count.value * 2)

watch(doubled, (val) => {
  console.log('New value: ' + val)
})
</script>

```

å¦‚æœå¯ä»¥è¿è¡Œé¡¹ç›®ï¼Œæ­å–œä½ å·²ç»æˆåŠŸäº†ï¼Œå¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†ã€‚æ˜¯ä¸æ˜¯çœ‹ç€æ¸…çˆ½äº†å¾ˆå¤šã€‚ğŸ˜„

### è‡ªå®šä¹‰é…ç½®

æˆ‘ä»¬æœ‰æ—¶å€™ä¸ºäº†æ–¹ä¾¿ï¼Œå¼•å…¥å…¶ä»–çš„å·¥å…·åŒ…ï¼Œæˆ‘ä»¬ä»¥[@vueuse/core](https://vueuse.org/guide/index.html)ä¸ºä¾‹

```js
// vite.config.ts
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  plugins: [
    AutoImport({
        imports: [
          'vue', 'vue-router',
          {
            '@vueuse/core': [
              'useMouse', 
            ],
          },
        ],
      }),
  ],
})

```

å¯ä»¥ç›´æ¥ä½¿ç”¨

```js
<script setup>
const { x, y } = useMouse()
console.log(x.value)

const mouse = useMouse()

console.log(mouse.x.value)
</script>
```

### å…¶ä»–

1. eslintæŠ¥é”™é—®é¢˜ï¼Œæˆ‘çš„è§£å†³åŠæ³•ï¼š

```js
AutoImport({
  // ....
  
  dts: './auto-import.d.ts',
  eslintrc: {
    enabled: true, //è®¾ç½®ä¸ºture
    filepath: './.eslintrc-auto-import.json',
    globalsPropValue: true,
  },

})
```

.eslintrc.jsæ·»åŠ é…ç½®ï¼š

```js
module.exports = {
  extends: [
    './.eslintrc-auto-import.json',
  ],
}
```

é‡æ–°è·‘ä¸‹é¡¹ç›®å°±å¯ä»¥äº†ï¼Œå¦‚æœæ–‡ä»¶æ ¹ç›®å½•å‡ºç°`.eslintrc-auto-import.json`ï¼Œå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†ã€‚

![image.png](/blog/images/plugins/vite-auto-import.png)

å…¶ä»–çš„å‚æ•°åœ¨æ€»ç»“ï¼Œï¼Œå¦‚æœä½ ä»¬æœ‰å…¶ä»–çš„æƒ³æ³•ï¼Œè¯·æŒ‡å‡ºï¼Œæˆ‘ä»¬ä¸€èµ·è®¨è®ºã€‚å…±åŒè¿›æ­¥ã€‚
